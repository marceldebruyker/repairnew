---
const { title = 'Repair Café Leonberg', description = 'Gemeinsam reparieren statt wegwerfen.' } = Astro.props
---
<!doctype html>
<html lang="de" class="scroll-smooth dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="preconnect" href="https://cdn.sanity.io" />
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body class="min-h-dvh bg-slate-900 text-slate-100">
    <header class="sticky top-0 z-50 backdrop-blur bg-slate-900/80 border-b border-slate-700">
      <nav class="mx-auto max-w-7xl px-6 lg:px-8 h-16 flex items-center justify-between" role="navigation" aria-label="Hauptnavigation">
        <a href="/" class="font-extrabold tracking-tight text-xl text-slate-100">Repair Café <span class="text-brand-400">Leonberg</span></a>
        
        <!-- Desktop Menu -->
        <ul class="hidden md:flex gap-6 text-sm">
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/events">Termine</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/news">News</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/#mitmachen">Mitmachen</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/#anfahrt">Anfahrt</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/#spenden">Spenden</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/admin">Admin</a></li>
        </ul>
        
        <div class="flex items-center gap-4">
          <!-- Desktop CTA Button -->
          <a href="/events" class="hidden md:block rounded-md bg-brand-600 px-3.5 py-2 text-sm font-semibold text-white shadow hover:bg-brand-700">Termin buchen</a>
          
          <!-- Mobile Menu Button -->
          <button 
            id="mobile-menu-button"
            class="md:hidden flex flex-col justify-center items-center w-8 h-8 space-y-1 group relative z-10"
            aria-label="Menü öffnen"
            aria-expanded="false"
          >
            <span class="w-6 h-0.5 bg-slate-300 transition-all duration-300 ease-in-out group-hover:bg-brand-400 origin-center"></span>
            <span class="w-6 h-0.5 bg-slate-300 transition-all duration-300 ease-in-out group-hover:bg-brand-400"></span>
            <span class="w-6 h-0.5 bg-slate-300 transition-all duration-300 ease-in-out group-hover:bg-brand-400 origin-center"></span>
          </button>
        </div>
      </nav>
      
      <!-- Mobile Menu Overlay -->
      <div 
        id="mobile-menu-overlay" 
        class="md:hidden fixed inset-0 bg-black/50 backdrop-blur opacity-0 invisible transition-all duration-300 ease-in-out z-30"
      ></div>
      
      <!-- Mobile Menu -->
      <div 
        id="mobile-menu" 
        class="md:hidden fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-slate-800 border-l border-slate-700 transform translate-x-full transition-transform duration-300 ease-in-out z-40"
      >
        <div class="p-6">
          <div class="flex items-center justify-between mb-8">
            <h2 class="text-lg font-semibold text-slate-100">Menü</h2>
            <button 
              id="mobile-menu-close"
              class="p-2 hover:bg-slate-700 rounded-lg transition-colors"
              aria-label="Menü schließen"
            >
              <svg class="w-5 h-5 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          
          <nav>
            <ul class="space-y-1">
              <li><a class="block py-3 px-3 text-slate-300 hover:text-brand-400 hover:bg-slate-700 rounded-lg transition-colors" href="/events">Termine</a></li>
              <li><a class="block py-3 px-3 text-slate-300 hover:text-brand-400 hover:bg-slate-700 rounded-lg transition-colors" href="/news">News</a></li>
              <li><a class="block py-3 px-3 text-slate-300 hover:text-brand-400 hover:bg-slate-700 rounded-lg transition-colors" href="/#mitmachen">Mitmachen</a></li>
              <li><a class="block py-3 px-3 text-slate-300 hover:text-brand-400 hover:bg-slate-700 rounded-lg transition-colors" href="/#anfahrt">Anfahrt</a></li>
              <li><a class="block py-3 px-3 text-slate-300 hover:text-brand-400 hover:bg-slate-700 rounded-lg transition-colors" href="/#spenden">Spenden</a></li>
              <li><a class="block py-3 px-3 text-slate-300 hover:text-brand-400 hover:bg-slate-700 rounded-lg transition-colors" href="/admin">Admin</a></li>
            </ul>
            
            <div class="mt-8">
              <a href="/events" class="block w-full text-center rounded-lg bg-brand-600 px-4 py-3 font-semibold text-white hover:bg-brand-700 transition-colors">Termin buchen</a>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <main class="mx-auto max-w-7xl px-6 lg:px-8">
      <slot />
    </main>
    <footer class="mt-24 border-t border-slate-700 py-10 text-sm text-slate-400">
      <div class="mx-auto max-w-7xl px-6 lg:px-8 flex items-center justify-between">
        <p>© {new Date().getFullYear()} Repair Café Leonberg</p>
        <div class="space-x-4">
          <a class="hover:underline hover:text-slate-300" href="/impressum">Impressum</a>
          <a class="hover:underline hover:text-slate-300" href="/datenschutz">Datenschutz</a>
        </div>
      </div>
    </footer>
    
    <script>
      // Mobile menu toggle functionality
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
      const mobileMenuClose = document.getElementById('mobile-menu-close');
      
      if (mobileMenuButton && mobileMenu && mobileMenuOverlay) {
        let isOpen = false;
        
        const openMenu = () => {
          isOpen = true;
          document.body.style.overflow = 'hidden'; // Prevent scroll
          mobileMenu.style.transform = 'translateX(0)';
          mobileMenuOverlay.style.opacity = '1';
          mobileMenuOverlay.style.visibility = 'visible';
          mobileMenuButton.setAttribute('aria-expanded', 'true');
          mobileMenuButton.setAttribute('aria-label', 'Menü schließen');
          
          // Animate hamburger to X
          const spans = mobileMenuButton.querySelectorAll('span');
          spans[0].style.transform = 'rotate(45deg) translate(6px, 6px)';
          spans[1].style.opacity = '0';
          spans[2].style.transform = 'rotate(-45deg) translate(6px, -6px)';
        };
        
        const closeMenu = () => {
          isOpen = false;
          document.body.style.overflow = '';
          mobileMenu.style.transform = 'translateX(100%)';
          mobileMenuOverlay.style.opacity = '0';
          mobileMenuOverlay.style.visibility = 'hidden';
          mobileMenuButton.setAttribute('aria-expanded', 'false');
          mobileMenuButton.setAttribute('aria-label', 'Menü öffnen');
          
          // Reset hamburger
          const spans = mobileMenuButton.querySelectorAll('span');
          spans[0].style.transform = 'none';
          spans[1].style.opacity = '1';
          spans[2].style.transform = 'none';
        };
        
        // Toggle menu
        mobileMenuButton.addEventListener('click', () => {
          if (isOpen) {
            closeMenu();
          } else {
            openMenu();
          }
        });
        
        // Close button
        if (mobileMenuClose) {
          mobileMenuClose.addEventListener('click', closeMenu);
        }
        
        // Close when clicking overlay
        mobileMenuOverlay.addEventListener('click', closeMenu);
        
        // Close menu when clicking on links
        const mobileLinks = mobileMenu.querySelectorAll('a');
        mobileLinks.forEach(link => {
          link.addEventListener('click', closeMenu);
        });
        
        // Close on escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && isOpen) {
            closeMenu();
          }
        });
      }
    </script>
  </body>
</html>