---
const { title = 'Repair Café Leonberg', description = 'Gemeinsam reparieren statt wegwerfen.' } = Astro.props
---
<!doctype html>
<html lang="de" class="scroll-smooth dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="preconnect" href="https://cdn.sanity.io" />
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body class="min-h-dvh bg-slate-900 text-slate-100">
    <header class="sticky top-0 z-50 backdrop-blur bg-slate-900/80 border-b border-slate-700">
      <nav class="mx-auto max-w-7xl px-6 lg:px-8 h-16 flex items-center justify-between" role="navigation" aria-label="Hauptnavigation">
        <a href="/" class="font-extrabold tracking-tight text-xl text-slate-100">Repair Café <span class="text-brand-400">Leonberg</span></a>
        
        <!-- Desktop Menu -->
        <ul class="hidden md:flex gap-6 text-sm">
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/events">Termine</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/news">News</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/#mitmachen">Mitmachen</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/#anfahrt">Anfahrt</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/#spenden">Spenden</a></li>
          <li><a class="hover:underline text-slate-300 hover:text-slate-100" href="/admin">Admin</a></li>
        </ul>
        
        <div class="flex items-center gap-4">
          <!-- Desktop CTA Button -->
          <a href="/events" class="hidden md:block rounded-md bg-brand-600 px-3.5 py-2 text-sm font-semibold text-white shadow hover:bg-brand-700">Termin buchen</a>
          
          <!-- Mobile Menu Button -->
          <button 
            id="mobile-menu-button"
            class="md:hidden flex flex-col justify-center items-center w-8 h-8 space-y-1 group relative z-10"
            aria-label="Menü öffnen"
            aria-expanded="false"
          >
            <span class="w-6 h-0.5 bg-slate-300 transition-all duration-300 ease-in-out group-hover:bg-brand-400 origin-center"></span>
            <span class="w-6 h-0.5 bg-slate-300 transition-all duration-300 ease-in-out group-hover:bg-brand-400"></span>
            <span class="w-6 h-0.5 bg-slate-300 transition-all duration-300 ease-in-out group-hover:bg-brand-400 origin-center"></span>
          </button>
        </div>
      </nav>
      
      <!-- Mobile Menu -->
      <div 
        id="mobile-menu" 
        class="md:hidden fixed inset-x-0 top-16 bg-slate-900/95 backdrop-blur border-b border-slate-700 transform -translate-y-full transition-transform duration-300 ease-in-out z-40"
      >
        <nav class="mx-auto max-w-7xl px-6 py-4">
          <ul class="space-y-4">
            <li><a class="block py-2 text-slate-300 hover:text-brand-400 transition-colors" href="/events">Termine</a></li>
            <li><a class="block py-2 text-slate-300 hover:text-brand-400 transition-colors" href="/news">News</a></li>
            <li><a class="block py-2 text-slate-300 hover:text-brand-400 transition-colors" href="/#mitmachen">Mitmachen</a></li>
            <li><a class="block py-2 text-slate-300 hover:text-brand-400 transition-colors" href="/#anfahrt">Anfahrt</a></li>
            <li><a class="block py-2 text-slate-300 hover:text-brand-400 transition-colors" href="/#spenden">Spenden</a></li>
            <li><a class="block py-2 text-slate-300 hover:text-brand-400 transition-colors" href="/admin">Admin</a></li>
            <li class="pt-2">
              <a href="/events" class="block w-full text-center rounded-md bg-brand-600 px-4 py-3 font-semibold text-white hover:bg-brand-700 transition-colors">Termin buchen</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <main class="mx-auto max-w-7xl px-6 lg:px-8">
      <slot />
    </main>
    <footer class="mt-24 border-t border-slate-700 py-10 text-sm text-slate-400">
      <div class="mx-auto max-w-7xl px-6 lg:px-8 flex items-center justify-between">
        <p>© {new Date().getFullYear()} Repair Café Leonberg</p>
        <div class="space-x-4">
          <a class="hover:underline hover:text-slate-300" href="/impressum">Impressum</a>
          <a class="hover:underline hover:text-slate-300" href="/datenschutz">Datenschutz</a>
        </div>
      </div>
    </footer>
    
    <script>
      // Mobile menu toggle functionality
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if (mobileMenuButton && mobileMenu) {
        let isOpen = false;
        
        mobileMenuButton.addEventListener('click', () => {
          isOpen = !isOpen;
          
          // Toggle menu visibility
          if (isOpen) {
            mobileMenu.style.transform = 'translateY(0)';
            mobileMenuButton.setAttribute('aria-expanded', 'true');
            mobileMenuButton.setAttribute('aria-label', 'Menü schließen');
          } else {
            mobileMenu.style.transform = 'translateY(-100%)';
            mobileMenuButton.setAttribute('aria-expanded', 'false');
            mobileMenuButton.setAttribute('aria-label', 'Menü öffnen');
          }
          
          // Animate hamburger to X
          const spans = mobileMenuButton.querySelectorAll('span');
          if (isOpen) {
            spans[0].style.transform = 'rotate(45deg) translate(6px, 6px)';
            spans[1].style.opacity = '0';
            spans[2].style.transform = 'rotate(-45deg) translate(6px, -6px)';
          } else {
            spans[0].style.transform = 'none';
            spans[1].style.opacity = '1';
            spans[2].style.transform = 'none';
          }
        });
        
        // Close menu when clicking on links
        const mobileLinks = mobileMenu.querySelectorAll('a');
        mobileLinks.forEach(link => {
          link.addEventListener('click', () => {
            if (isOpen) {
              mobileMenuButton.click();
            }
          });
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
          if (isOpen && !mobileMenuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
            mobileMenuButton.click();
          }
        });
      }
    </script>
  </body>
</html>